{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "spatial-file-manager",
  "title": "Spatial File Manager",
  "description": "3D spatial file management component",
  "dependencies": [
    "class-variance-authority"
  ],
  "registryDependencies": [
    "utils"
  ],
  "files": [
    {
      "path": "registry/sf-ui/spatial-file-manager/spatial-file-manager.tsx",
      "content": "\"use client\";\n\nimport { cva, type VariantProps } from \"class-variance-authority\";\nimport * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\n/**\n * Spatial File Managerのバリアント定義\n * 3次元空間を利用したファイル管理\n */\nconst spatialFileManagerVariants = cva(\"relative\", {\n  variants: {\n    perspective: {\n      none: \"\",\n      subtle: \"perspective-1000\",\n      normal: \"perspective-[2000px]\",\n      strong: \"perspective-[3000px]\",\n    },\n  },\n  defaultVariants: {\n    perspective: \"normal\",\n  },\n});\n\n/**\n * ファイルアイテムの型定義\n */\nexport interface SpatialFileItem {\n  /**\n   * ファイルID\n   */\n  id: string;\n  /**\n   * ファイル名\n   */\n  name: string;\n  /**\n   * ファイルタイプ（画像、テキストなど）\n   */\n  type?: string;\n  /**\n   * ファイルのサイズ（注意を引くための大きさ調整に使用）\n   */\n  size?: number;\n  /**\n   * ファイルの位置（3D空間での座標）\n   */\n  position?: {\n    x: number;\n    y: number;\n    z: number;\n  };\n  /**\n   * カスタムアイコン\n   */\n  icon?: React.ReactNode;\n  /**\n   * クリック時のハンドラ\n   */\n  onClick?: () => void;\n}\n\n/**\n * Spatial File ManagerコンポーネントのProps\n */\nexport interface SpatialFileManagerProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof spatialFileManagerVariants> {\n  /**\n   * 表示するファイルのリスト\n   */\n  files: SpatialFileItem[];\n  /**\n   * ファイル表示モード\n   */\n  mode?: \"text\" | \"icon\" | \"mixed\";\n  /**\n   * アクティブなファイルID（大きく表示される）\n   */\n  activeFileId?: string;\n}\n\n/**\n * SF映画のインタフェースデザインをインスパイアした3Dファイル管理コンポーネント\n *\n * 3次元空間を利用して大量のデータを配置・整理します。\n * 空間的記憶を活用した直感的なファイル検索を提供します。\n * 『ファイナル・カット』や『カウボーイビバップ』のような3Dファイル管理を実現します。\n *\n * 原則：\n * - 大きさで注意を引く：処理中のファイルが他のファイルよりも大きく表示される\n * - 空間的記憶を活用：3次元空間を利用してファイルを配置\n *\n * @example\n * ```tsx\n * <SpatialFileManager\n *   files={[\n *     { id: \"1\", name: \"file1.txt\", size: 100 },\n *     { id: \"2\", name: \"file2.jpg\", size: 500, activeFileId: \"2\" },\n *   ]}\n *   mode=\"mixed\"\n * />\n * ```\n */\nconst SpatialFileManager = React.forwardRef<HTMLDivElement, SpatialFileManagerProps>(\n  (\n    { className, perspective, files, mode = \"mixed\", activeFileId, ...props },\n    ref\n  ) => {\n    const containerRef = React.useRef<HTMLDivElement>(null);\n    const [hoveredFileId, setHoveredFileId] = React.useState<string | null>(null);\n\n    // ファイルのサイズを正規化（0.5倍から2倍の範囲）\n    const normalizeSize = React.useCallback(\n      (size?: number, isActive?: boolean) => {\n        if (isActive) return 2;\n        if (!size) return 1;\n        const maxSize = Math.max(...files.map((f) => f.size || 1));\n        const minSize = Math.min(...files.map((f) => f.size || 1));\n        if (maxSize === minSize) return 1;\n        return 0.5 + ((size - minSize) / (maxSize - minSize)) * 1.5;\n      },\n      [files]\n    );\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          spatialFileManagerVariants({ perspective }),\n          \"w-full h-full min-h-[500px]\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          ref={containerRef}\n          className={cn(\n            \"relative w-full h-full\",\n            \"transform-gpu\",\n            perspective && \"preserve-3d\",\n            perspective && spatialFileManagerVariants({ perspective })\n          )}\n          style={{\n            transformStyle: \"preserve-3d\",\n            perspectiveOrigin: \"center center\",\n          }}\n        >\n          {files.map((file) => {\n            const isActive = activeFileId === file.id || hoveredFileId === file.id;\n            const scale = normalizeSize(file.size, isActive);\n            const position = file.position || { x: 0, y: 0, z: 0 };\n\n            return (\n              <div\n                key={file.id}\n                className={cn(\n                  \"absolute transition-all duration-300 cursor-pointer\",\n                  \"font-lcars text-lcars-blue\",\n                  isActive && \"z-10\"\n                )}\n                style={{\n                  left: `${50 + position.x}%`,\n                  top: `${50 + position.y}%`,\n                  transform: `translate(-50%, -50%) translateZ(${position.z}px) scale(${scale})`,\n                  transformStyle: \"preserve-3d\",\n                }}\n                onMouseEnter={() => setHoveredFileId(file.id)}\n                onMouseLeave={() => setHoveredFileId(null)}\n                onClick={file.onClick}\n              >\n                <div\n                  className={cn(\n                    \"p-3 rounded-lg border-2 border-lcars-blue\",\n                    \"bg-lcars-dark/80 backdrop-blur-sm\",\n                    \"shadow-[0_0_10px_rgba(74,158,255,0.3)]\",\n                    isActive &&\n                      \"shadow-[0_0_20px_rgba(74,158,255,0.6)] border-lcars-blue-glow\"\n                  )}\n                >\n                  {mode === \"icon\" && file.icon && (\n                    <div className=\"flex items-center justify-center mb-2\">\n                      {file.icon}\n                    </div>\n                  )}\n                  {(mode === \"text\" || mode === \"mixed\") && (\n                    <div\n                      className={cn(\n                        \"text-sm uppercase tracking-wider\",\n                        isActive && \"text-hierarchy-primary\"\n                      )}\n                    >\n                      {file.name}\n                    </div>\n                  )}\n                  {mode === \"mixed\" && file.type && (\n                    <div className=\"text-xs text-hierarchy-tertiary mt-1\">\n                      {file.type}\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n);\nSpatialFileManager.displayName = \"SpatialFileManager\";\n\nexport { SpatialFileManager, spatialFileManagerVariants };\n\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:component"
}